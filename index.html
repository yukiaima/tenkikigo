<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>天気記号問題</title>
</head>
<body>

<!-- 問題作成と答え表示 -->
<div style="text-align:center">
    <a href="https://teamporali.jp/weatherf/weathersymbol" target="_blank">参考サイト</a>
    <h1>問題自動作成</h1>
    <form id="form1" action="#">
        <input type="button" onclick="click_button()" value="問題作成・答え表示">
    </form>    
</div>

<div style="text-align:center">
<script>
'use strict';

//変数の宣言
let this_element = document.currentScript; //この<script>要素
let img_width = 80; //画像のサイズ
let state_QA = 'A' //問題(Q) or 答え(A) の表示用フラグ
let img_name; // 画像名を格納する変数
let explain; //説明文を格納する変数
let explain_list = [
    ['s00.png', '00.前１時間内の雲の変化不明。'],
    ['s01.png', '01.前１時間内に雲消散または衰弱。'],
    ['s02.png', '02.前１時間内に空模様全般に変化がない。'],
    ['s03.png', '03.前１時間内に雲発生または発達。'],
    ['s04.png', '04.煙のため視程が悪い。'],
    ['s05.png', '05.煙霧。'],
    ['s06.png', '06.空中広く塵または砂が浮遊（風に巻き上げられたものではない）。'],
    ['s07.png', '07.風に巻き上げられた塵または砂。'],
    ['s08.png', '08.前１時間内に観測所または付近の発達した塵旋風あり。'],
    ['s09.png', '09.視程内または前１時間内の砂塵嵐。'],
    ['s10.png', '10.もや。'],
    ['s11.png', '11.地霧または低い氷霧が散在（眼の高さ以下）。'],
    ['s12.png', '12.地霧または低い氷霧が連続（眼の高さ以下）。'],
    ['s13.png', '13.雷光は見えるが雷鳴は聞こえない。'],
    ['s14.png', '14.視程内に降水。地面または海面に達していない。'],
    ['s15.png', '15.視程内に降水。観測所から５ｋｍ以上。'],
    ['s16.png', '16.視程内に降水。観測所から５ｋｍ未満。'],
    ['s17.png', '17.雷電。観測所に降水がない。'],
    ['s18.png', '18.観測時、または前１時間内に観測所または視程内にスコール。'],
    ['s19.png', '19.観測時、または前１時間内に観測所または視程内に竜巻。'],
    ['s20.png', '20.前１時間内に霧雨または霧雪（しゅう性でない）。'],
    ['s21.png', '21.前１時間内に雨（しゅう雨ではない）。'],
    ['s22.png', '22.前１時間内に雪（しゅう雪ではない）。'],
    ['s23.png', '23.前１時間内にみぞれまたは凍雨（しゅう性でない）。'],
    ['s24.png', '24.前１時間内に着氷性の雨または霧雨（しゅう性でない）。'],
    ['s25.png', '25.前１時間内にしゅう雨。'],
    ['s26.png', '26.前１時間内にしゅう雪またはしゅう性のみぞれ。'],
    ['s27.png', '27.前１時間内に雹、氷あられ、雪あられ。'],
    ['s28.png', '28.前１時間内に霧または氷霧。'],
    ['s29.png', '29.前１時間内に雷電（降水を伴ってもよい）。'],
    ['s30.png', '30.弱または並の砂塵嵐。前１時間内に薄くなった。'],
    ['s31.png', '31.弱または並の砂塵嵐。前１時間内変化なし。'],
    ['s32.png', '32.弱または並の砂塵嵐。前１時間内に濃くなった。'],
    ['s33.png', '33.強い砂塵嵐。前１時間内に薄くなった。'],
    ['s34.png', '34.強い砂塵嵐。前１時間内変化なし。'],
    ['s35.png', '35.強い砂塵嵐。前１時間内に濃くなった。'],
    ['s36.png', '36.弱または並の地吹雪。（眼の高さより低い）。'],
    ['s37.png', '37.強い地吹雪。（眼の高さより低い）。'],
    ['s38.png', '38.弱または並の地吹雪。（眼の高さより高い）。'],
    ['s39.png', '39.強い地吹雪。（眼の高さより高い）。'],
    ['s40.png', '40.遠方に霧または氷霧。前１時間内に観測所にはない。'],
    ['s41.png', '41.霧または氷霧が散在。'],
    ['s42.png', '42.霧または氷霧。空を透視できる。前１時間内に薄くなった。'],
    ['s43.png', '43.霧または氷霧。空を透視できない。前１時間内に薄くなった。'],
    ['s44.png', '44.霧または氷霧。空を透視できる。前１時間内に変化がない。'],
    ['s45.png', '45.霧または氷霧。空を透視できない。前１時間内に変化がない。'],
    ['s46.png', '46.霧または氷霧。空を透視できる。前１時間内に濃くなった。'],
    ['s47.png', '47.霧または氷霧。空を透視できない。前１時間内に濃くなった。'],
    ['s48.png', '48.霧または氷霧が発生中。空を透視できる。'],
    ['s49.png', '49.霧または氷霧が発生中。空を透視できない。'],
    ['s50.png', '50.弱い霧雨。前１時間内に止み間があった。'],
    ['s51.png', '51.弱い霧雨。前１時間内に止み間がなかった。'],
    ['s52.png', '52.並の霧雨。前１時間内に止み間があった。'],
    ['s53.png', '53.並の霧雨。前１時間内に止み間がなかった。'],
    ['s54.png', '54.強い霧雨。前１時間内に止み間があった。'],
    ['s55.png', '55.強い霧雨。前１時間内に止み間がなかった。'],
    ['s56.png', '56.弱い着氷性の霧雨。'],
    ['s57.png', '57.並または強い着氷性の霧雨。'],
    ['s58.png', '58.霧雨と雨。弱い。'],
    ['s59.png', '59.霧雨と雨。並または強い。'],
    ['s60.png', '60.弱い雨。前１時間内に止み間があった。'],
    ['s61.png', '61.弱い雨。前１時間内に止み間がなかった。'],
    ['s62.png', '62.並の雨。前１時間内に止み間があった。'],
    ['s63.png', '63.並の雨。前１時間内に止み間がなかった。'],
    ['s64.png', '64.強い雨。前１時間内に止み間があった。'],
    ['s65.png', '65.強い雨。前１時間内に止み間がなかった。'],
    ['s66.png', '66.弱い着氷性の雨。'],
    ['s67.png', '67.並または強い着氷性の雨。'],
    ['s68.png', '68.みぞれ、または霧雨と雪。弱い。'],
    ['s69.png', '69.みぞれ、または霧雨と雪。並または強い。'],
    ['s70.png', '70.弱い雪。前１時間内に止み間があった。'],
    ['s71.png', '71.弱い雪。前１時間内に止み間がなかった。'],
    ['s72.png', '72.並の雪。前１時間内に止み間があった。'],
    ['s73.png', '73.並の雪。前１時間内に止み間がなかった。'],
    ['s74.png', '74.強い雪。前１時間内に止み間があった。'],
    ['s75.png', '75.強い雪。前１時間内に止み間がなかった。'],
    ['s76.png', '76.細氷。霧があってもよい。'],
    ['s77.png', '77.霧雪。霧があってもよい。'],
    ['s78.png', '78.単独結晶の雪。霧があってもよい。'],
    ['s79.png', '79.凍雨。'],
    ['s80.png', '80.弱いしゅう雨。'],
    ['s81.png', '81.並または強いしゅう雨。'],
    ['s82.png', '82.激しいしゅう雨。'],
    ['s83.png', '83.弱いしゅう性のみぞれ。'],
    ['s84.png', '84.並または強いしゅう性のみぞれ。'],
    ['s85.png', '85.弱いしゅう雪。'],
    ['s86.png', '86.並または強いしゅう雪。'],
    ['s87.png', '87.雪あられ、または氷あられ。弱い。雨かみぞれを伴ってもよい。'],
    ['s88.png', '88.雪あられ、または氷あられ。並または強い。雨かみぞれを伴ってもよい。'],
    ['s89.png', '89.弱い雹。雨かみぞれを伴ってもよい。雷鳴はない。'],
    ['s90.png', '90.並または強い雹。雨かみぞれを伴ってもよい。雷鳴はない。'],
    ['s91.png', '91.前１時間内に雷電。観測時に弱い雨。'],
    ['s92.png', '92.前１時間内に雷電。観測時に並または強い雨。'],
    ['s93.png', '93.前１時間内に雷電。観測時に弱い雪、みぞれ、雪あられ、氷あられ、または雹。'],
    ['s94.png', '94.前１時間内に雷電。観測時に並または強い雪、みぞれ、雪あられ、氷あられ、または雹。'],
    ['s95.png', '95.観測時に弱または並の雷電。雨、雪、またはみぞれを伴う。'],
    ['s96.png', '96.観測時に弱または並の雷電。雹、氷あられ、または雪あられを伴う。'],
    ['s97.png', '97.観測時に強い雷電。雨、雪、またはみぞれを伴う。'],
    ['s98.png', '98.観測時に雷電。砂塵嵐を伴う。'],
    ['s99.png', '99.観測時に強い雷電。雹、氷あられ、または雪あられを伴う。']
]

//関数定義
function make_test(){
    //取得する配列の行インデックス
    let i = Math.floor( Math.random() * explain_list.length);
    
    // 画像、説明文
    img_name = explain_list[i][0];
    explain = explain_list[i][1];
    
    this_element.insertAdjacentHTML('beforebegin', 
    '<figure><img src="天気記号\\' + img_name + '" alt="図が取得できません" width="' + img_width + '"><figcaption></figcaption></figure>');
}

function show_answer(){
    this_element.insertAdjacentHTML('beforebegin', '<p>' + explain + '</p>');
}

function click_button(){
  //state_QAがAなら、問題を表示して、Qに変更
  if (state_QA == 'A'){
        make_test();
        state_QA = 'Q';
    }
  //state_QAがQなら、答えを表示して、Aに変更
  else if (state_QA == 'Q'){
        show_answer();
        state_QA = 'A';
    }
}

// htmlへ出力（全て出力）
this_element.insertAdjacentHTML('afterend', '<h1>天気記号一覧</h1><table><tbody id="list_table"></tbody></table>');
let tr_text = ''; //trに書き出すhtmlを格納する変数
for (let i = 0; i < explain_list.length; i++){
    // 画像、説明文
    img_name = explain_list[i][0];
    explain = explain_list[i][1];
    
    // 表に書き出すhtml
    tr_text += '<td class="img"><img src="天気記号\\' + img_name + '" alt="図が取得できません" width="' + img_width + '"></td><td class="explain">' + explain + '</td>';
    
    // 図2つたまったら、trに出力して、tr_textをクリア
    if (i%2 == 1){
        document.getElementById('list_table').insertAdjacentHTML('beforeend', tr_text);
        tr_text = ''
    }
    
}

</script>
</div>

<noscript>
<p>このサイトではJavaScriptを使用していますので、有効にしてください。</p>
</noscript>

</body>
</html>
